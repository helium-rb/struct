#!/usr/bin/env ruby

require "bundler/setup"
require 'byebug'
require "helium/console"
require "helium/struct"
require "helium/struct/hooks"
require "helium/struct/use"

# You can add fixtures and/or initialization code here to make experimenting
# with your gem easier. You can also use a different console, if you like.

# (If you use this, don't forget to add pry to your Gemfile!)
class NameStruct
  include Helium::Struct
  include Helium::Struct::Hooks

  attribute :name
  attribute :name_caps

  on_change(:name) do |value|
    self.name_caps = value&.upcase
  end
end

class UserStruct
  include Helium::Struct
  include Helium::Struct::Undefined
  include Helium::Struct::Hooks
  include Helium::Struct::Use


  attribute :email
  use NameStruct, as: :name_struct
end

Pry.start
